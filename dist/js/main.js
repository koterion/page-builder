!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=3)}([function(e,t,n){"use strict";(function(e){function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var i=0,a={editors:{},create:function(e,t){try{!function(e){if("undefined"==typeof tinymce)throw Error("PageBuilder: Didn't find tinymce. Please connect tinymce.");if(void 0===e||0===e.length)throw Error("PageBuilder: Didn't find selector");if(e.length>1)throw Error("PageBuilder: Please use individual selector, not more.\n        You use "+e.length+" selectors")}(e)}catch(e){return console.error(e.message),!1}var n=new l(e,t);return n._init(),this.editors[n.className+"_"+i]=n,i+=i,n},getContent:function(e){if(this.editors[e])return this.editors[e]._getContent();console.error("Didn't find plugin with id '".concat(e,"'"))},rebuild:function(e){this.editors[e]._rebuild()}},o={height:"auto",rowClasses:"first, sec, third",colClasses:"full",edit:!0,draggable:!0,tinymceSettings:function(e){tinymce.init({menubar:!1,selector:e,height:400,plugins:"link table lists paste",toolbar:"formatselect | table",setup:function(e){e.ui.registry.addContextToolbar("textselection",{predicate:function(t){return!e.selection.isCollapsed()},items:"bold italic underline | bullist numlist | alignleft aligncenter alignright",position:"selection",scope:"node"})}})},setTinymceContent:function(e,t){tinymce.get(e.id).setContent(t)},getTinymceContent:function(e){return tinymce.get(e.id).getContent()}},l=function(){function e(s,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selector=s.length>0?s[0]:s,this.className="pgBld",this.textareaEditor=this.className+"-editor-textarea";var a=i||{};this.options=function(e){for(var s=1;s<arguments.length;s++){var i=null!=arguments[s]?arguments[s]:{};s%2?t(i,!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},o,{},a)}var l,u,v;return l=e,(u=[{key:"_init",value:function(){this._changeSelector(),this._createInterface(),this._createBody(),this.options.edit&&this._createMenu(),this._createEditor(),this._createRow(),this._clickDoc()}},{key:"_changeSelector",value:function(){var e=this;this.value=void 0!==this.selector.value?this.selector.value:this.selector.innerHTML,this.selector.style.display="none";var t={rowclasses:"rowClasses",colclasses:"colClasses"};c(this.selector.dataset,function(n,s){t[n]?e.options[t[n]]=s:e.options[n]=s})}},{key:"_createInterface",value:function(){this.wrapBlock=this._createEl("div",{id:this.className+"_"+i,class:this.className}),this.selector.parentNode.insertBefore(this.wrapBlock,this.selector),this.wrapBlock.style.height=this.options.height}},{key:"_createMenu",value:function(){var e=this;this.menu=this._createEl("div",{class:this.className+"-menu"}),this.menuItem={add:this._createEl("button",{class:this.className+"-menu-item-add",type:"button"},'<i class="svg">playlist_add</i> <span>Add block</span>')},this.wrapBlock.appendChild(this.menu),c(this.menuItem,function(t,n){e.menu.appendChild(n)})}},{key:"_createBody",value:function(){this.body=this._createEl("div",{class:this.className+"-body"},this.value),this.wrapBlock.appendChild(this.body)}},{key:"_createEditor",value:function(){var e=this,t=e.className+"-editor";e.editor=e._createEl("div",{class:t});var n=[e._createEl("div",{class:t+"-block"}),e._createEl("div",{class:t+"-footer"}),e._createEl("h3",{class:t+"-h3"},"Edit content"),e._createEl("button",{class:t+"-close",title:"Close",type:"button"},'<i class="svg">close</i> <span>Exit (without saving changes)</span>'),e._createEl("button",{class:t+"-save",title:"Save",type:"button"},'<i class="svg">save</i> <span>Save changes</span>'),e._createEl("div",{class:e.textareaEditor})],s=n[0],i=n[1],a=n[2],o=n[3],l=n[4],c=n[5];function u(){var t=e.wrapBlock.querySelector("div."+e.className+"-content.changing");return e.editor.classList.remove("show"),t.classList.remove("changing"),t}e.editor.appendChild(s),i.appendChild(o),i.appendChild(l),r([a,c,i],function(e){s.appendChild(e)}),e.wrapBlock.appendChild(e.editor),e._addTiny("div."+this.textareaEditor),d(o,"click",function(){u()}),d(l,"click",function(){u().innerHTML=e.options.getTinymceContent(s.querySelector("div."+e.textareaEditor))})}},{key:"_createRowSettings",value:function(e){var t=this,n=this,s=n.className+"-settings",i=n._createEl("div",{class:s}),a=[n._createEl("div",{class:s+"-bgRow"}),n._createEl("div",{class:s+"-column"}),n._createEl("div",{class:s+"-footer"}),n._createEl("select",{class:s+"-bgCol"}),n._createEl("button",{class:s+"-close",title:"Close",type:"button"},'<i class="svg">close</i> <span>Exit (without saving changes)</span>'),n._createEl("button",{class:s+"-save",title:"Save",type:"button"},'<i class="svg">save</i> <span>Save changes</span>'),n._createEl("h3",{class:s+"-h3"},"Row class"),n._createEl("h3",{class:s+"-h3"},"Number of columns in a row")],o=a[0],l=a[1],c=a[2],u=a[3],v=a[4],h=a[5],p=a[6],m=a[7];o.appendChild(p),o.appendChild(u),l.appendChild(m),c.appendChild(v),c.appendChild(h),r(("def, "+n.options.rowClasses).split(", "),function(e){var t=n._createEl("option",{value:e},e);"def"===e&&(t.innerText="none"),u.appendChild(t)}),r([o,l,c],function(e){i.appendChild(e)});for(var f=function(e){var n=t._createEl("div",{"data-col":e},'<i class="svg"></i> <span>'.concat(e,"</span>"));d(n,"click",function(){var e;(e=l.querySelector(".active"))&&e.classList.remove("active"),n.classList.add("active")}),l.appendChild(n)},g=1;g<=6;g++)f(g);function y(){var e=n.wrapBlock.querySelector("div."+n.className+"-row.changing");return e.classList.remove("changing"),e.removeAttribute("data-action"),n.body.classList.remove("editing"),e}e.appendChild(i),d(v,"click",function(){var e=y(),t=e.querySelector("div."+s+"-bgCol.active"),n=e.querySelector("div[data-col].active");t&&t.classList.remove("active"),n&&n.classList.remove("active")}),d(h,"click",function(){var e=y(),t=u.value,s=l.querySelector(".active");e.className=n.className+"-row","def"!==t&&e.classList.add(t),s&&(e.dataset.setCol=s.dataset.col)})}},{key:"_createRowMenu",value:function(e){var t=this.className+"-row-menu";this.rowMenu=this._createEl("div",{class:t});var n=this._createEl("button",{class:t+"-settings",title:"Settings for row","data-role":"settingRow",type:"button"},'<i class="svg">settings_applications</i> <span>Settings</span>'),s={block:this._createEl("div",{class:t+"-block"}),buttons:{edit:this._createEl("button",{title:"Edit row style","data-role":"editRow",type:"button"},'<i class="svg">edit</i> <span>Edit</span>'),column:this._createEl("button",{title:"Add column","data-role":"addCol",type:"button"},'<i class="svg">playlist_add</i> <span>Add column</span>'),delete:this._createEl("button",{title:"Remove this row","data-role":"delRow",type:"button"},'<i class="svg">delete_forever</i> <span>Remove</span>')}};c(s.buttons,function(e,n){n.classList=t+"-"+e,s.block.appendChild(n)}),this.rowMenu.appendChild(s.block),this.rowMenu.appendChild(n),e.firstChild?e.insertBefore(this.rowMenu,e.firstChild):e.appendChild(this.rowMenu)}},{key:"_createRow",value:function(){var e=this;this.rows=this.body.querySelectorAll("div."+this.className+"-row");var t=!1;if(this.rows.length<1){t=!0,this.body.innerHTML="";var n=this._createEl("div",{class:this.className+"-row","data-col":0});this._createCol(n,!0,this.value),this.body.appendChild(n),this.rows=this.body.querySelectorAll("div."+this.className+"-row")}r(this.rows,function(n){e.options.edit&&(e._createRowMenu(n),e._connectMenuFunc(n),e._createRowSettings(n)),e.options.draggable&&e._drag(n,"."+e.className+"-row","changing","."+e.className+"-col"),n.dataset.col<1?e._createCol(n,!0):t||r(n.querySelectorAll("div."+e.className+"-col"),function(t){e._addColFunc(t)})}),this.options.edit&&d(this.menuItem.add,"click",function(){var t=e._createEl("div",{class:e.className+"-row","data-col":0});e.body.appendChild(t),e._createRowMenu(t),e._createRowSettings(t),e._connectMenuFunc(t),e.options.draggable&&e._drag(t,"."+e.className+"-row","changing","."+e.className+"-col"),e._createCol(t),e.rows=e.body.querySelectorAll("div."+e.className+"-row")})}},{key:"_drag",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=this;function a(){event.preventDefault();var a=e.cloneNode(!0),c=l(e),r=event.clientX-c.left,u=event.clientY-c.top,v=i.className+"-move",h=!(event.target.closest(s)||e.classList.contains(n)||event.target.closest("button")||i.body.classList.contains("editing")),p=t.replace(".",""),m=e.closest("."+i.className+"-row"),f=!1,g=null;if(h){a.style.width=e.scrollWidth+"px",a.style.height=e.scrollHeight+"px",a.classList.add(i.className+"-clone");var y=0;g=setInterval(function(){1===y&&(d(document,"mousemove",b),d(document,"touchmove",b)),y++},25),d(e,"mouseup",C),d(e,"touchend",C)}function b(){_(),function(n){a.style.left=n.clientX-r+"px",a.style.top=n.clientY-u+"px",e.classList.add(v);var s=o(a,n.clientX,n.clientY),c=s?s.closest(t):null;if(c&&!c.classList.contains(v)&&!c.classList.contains(i.className+"-clone")){var d=l(c),h=c.scrollHeight,m=d.top+h/2;n.clientY>m?c.nextElementSibling&&c.nextElementSibling.classList.contains(p)?c.parentNode.insertBefore(e,c.nextElementSibling):c.parentNode.appendChild(e):(!c.previousElementSibling||c.previousElementSibling&&!c.previousElementSibling.classList.contains(v))&&c.parentNode.insertBefore(e,c)}}(event),f||(f=!0,i.body.appendChild(a)),d(a,"mouseup",C),d(a,"touchend",C)}function C(){if(_(),document.removeEventListener("mousemove",b),document.removeEventListener("touchmove",b),f){var n=o(a,event.clientX,event.clientY),s=n?n.closest(t):null,l=s?s.closest("."+i.className+"-row"):null;e.classList.contains(i.className+"-col")&&l&&m&&l!==m&&(i._updateColCount(m),i._updateColCount(l)),i.body.removeChild(a)}f=!1,a.removeEventListener("mouseup",C),a.removeEventListener("touchend",C),e.removeEventListener("mouseup",C),e.removeEventListener("touchend",C),e.classList.remove(v)}function _(){g&&(clearInterval(g),g=null)}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,s=e.className;e.className+=" ".concat(i.className,"-hide");var a=document.elementFromPoint(t,n);return e.className=s,a}function l(e){var t=e.getBoundingClientRect();return{top:t.top,left:t.left}}d(e,"mousedown",a),d(e,"touchstart",a)}},{key:"_connectMenuFunc",value:function(e){var t=this;r(e.querySelectorAll("div."+this.className+"-row-menu button"),function(n){"delRow"===n.dataset.role?t._removeRow(n,e):"addCol"===n.dataset.role?t._addCol(n,e):"editRow"===n.dataset.role?t._editRow(n,e):"settingRow"===n.dataset.role&&t._openSetting(n,e)})}},{key:"_openSetting",value:function(e,t){var n=this;d(e,"click",function(){n.body.classList.add("editing"),r(n.rows,function(e){e.classList.remove("changing")}),t.classList.add("changing")})}},{key:"_editRow",value:function(e,t){var n=this;d(e,"click",function(){t.dataset.action="edit";var e=t.querySelector("div."+n.className+"-settings"),s=t.dataset.setCol?t.dataset.setCol:t.dataset.col,i=e.querySelector("select."+n.className+"-settings-bgCol"),a=!1;r(e.querySelectorAll("div."+n.className+"-settings-bgCol, div[data-col]"),function(e){e.classList.remove("active")}),r(t.classList,function(e){n.options.rowClasses.includes(e)&&(i.value=e,a=!0)}),a||(i.value="def"),e.querySelector('div[data-col = "'+s+'"]').classList.add("active")})}},{key:"_createCol",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=this._createEl("div",{class:this.className+"-col"});this._addColFunc(s);var i=t&&e.querySelector("div."+this.className+"-content")?e.querySelector("div."+this.className+"-content"):this._createEl("div",{class:this.className+"-content"},n);s.appendChild(i),e.appendChild(s),this._updateColCount(e)}},{key:"_updateColCount",value:function(e){var t=e.querySelectorAll("."+this.className+"-col").length;t>0?e.dataset.col=t<7?t:6:e.parentNode.removeChild(e)}},{key:"_addColFunc",value:function(e){var t=this._createEl("button",{class:this.className+"-col-edit",title:"Edit column",type:"button"},'<i class="svg">edit</i>');if(e.appendChild(t),this._editContent(t,e),this.options.edit){var n=this._createEl("button",{class:this.className+"-col-del",title:"Remove column",type:"button"},'<i class="svg">delete_forever</i>');e.appendChild(n),this._removeCol(n,e);var s=this._createEl("button",{class:this.className+"-col-settings",title:"Settings",type:"button"},'<i class="svg">settings_applications</i>');e.appendChild(s),this._openColSetting(s,e),this._createColSettings(e),this.options.draggable&&this._drag(e,"."+this.className+"-col","changingCol")}}},{key:"_addCol",value:function(e,t){var n=this;d(e,"click",function(){n._createCol(t)})}},{key:"_removeRow",value:function(e,t){var n=this;d(e,"click",function(){n.body.classList.remove("editing"),t.parentElement.removeChild(t)})}},{key:"_removeCol",value:function(e,t){var n=this;d(e,"click",function(){var e=t.parentElement;e.removeChild(t),n._updateColCount(e)})}},{key:"_createColSettings",value:function(e){var t=this.className+"-colSettings",n=this,s=[n._createEl("div",{class:t}),n._createEl("div",{class:t+"-classes"}),n._createEl("div",{class:t+"-footer"}),n._createEl("h3",{class:t+"-h3"},"Col class"),n._createEl("select",{class:t+"-select"}),n._createEl("button",{class:t+"-close",title:"Close",type:"button"},'<i class="svg">close</i> <span>Exit</span>'),n._createEl("button",{class:t+"-save",title:"Save",type:"button"},'<i class="svg">save</i> <span>Save changes</span>')],i=s[0],a=s[1],o=s[2],l=s[3],c=s[4],u=s[5],v=s[6];r(("def, "+n.options.colClasses).split(", "),function(e){var t=n._createEl("option",{value:e},e);"def"===e&&(t.innerText="none"),c.appendChild(t)}),a.appendChild(l),a.appendChild(c),o.appendChild(u),o.appendChild(v),i.appendChild(a),i.appendChild(o),e.appendChild(i),d(u,"click",function(){e.classList.remove("changingCol")}),d(v,"click",function(){var t=c.value;e.classList="def"===t?n.className+"-col":n.className+"-col "+t})}},{key:"_openColSetting",value:function(e,t){var n=this;d(e,"click",function(){var e=n.body.querySelectorAll(".changingCol"),s=t.querySelector("."+n.className+"-colSettings-select");r(e,function(e){e.classList.remove("changingCol")}),t.classList.add("changingCol");var i=!1;r(t.classList,function(e){n.options.colClasses.includes(e)&&(s.value=e,i=!0)}),i||(s.value="def")})}},{key:"_editContent",value:function(e,t){var n=this;d(e,"click",function(){n.editor.classList.add("show");var e=t.querySelector("div."+n.className+"-content"),s=n.editor.querySelector("div."+n.textareaEditor);s.innerHTML=e.innerHTML,n.options.setTinymceContent(s,e.innerHTML),e.classList.add("changing")})}},{key:"_clickDoc",value:function(){var e=this;d(document,"mouseup",function(t){var n=e.wrapBlock.querySelector(".editing"),s=e.body.querySelector(".changingCol");if(n){var i=e.body.querySelector(".changing");i&&!i.contains(t.target)&&(i.classList.remove("changing"),i.removeAttribute("data-action"),n.classList.remove("editing"))}s&&!s.contains(t.target)&&s.classList.remove("changingCol")})}},{key:"_createEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=document.createElement(e);return c(t,function(e,t){s.setAttribute(e,t)}),s.innerHTML=n,s}},{key:"_getContent",value:function(){var e=this,t=this.body.cloneNode(!0);function n(e,t){r(t,function(t){e.removeAttribute(t)})}return r(t.querySelectorAll("div."+this.className+"-row"),function(t){var s=t.querySelector("div."+e.className+"-row-menu"),i=t.querySelector("div."+e.className+"-settings");s&&t.removeChild(s),i&&t.removeChild(i);var a=t.querySelectorAll("div."+e.className+"-col");if(a.length>1)r(a,function(t){var s=t.querySelector("."+e.className+"-col-del"),i=t.querySelector("."+e.className+"-col-edit"),a=t.querySelector("."+e.className+"-content"),o=t.querySelector("."+e.className+"-col-settings"),l=t.querySelector("."+e.className+"-colSettings");n(a,["id","style","aria-hidden"]),s&&t.removeChild(s),i&&t.removeChild(i),o&&t.removeChild(o),l&&t.removeChild(l)});else if(1===a.length){var o=(a=a[0]).querySelector("div."+e.className+"-content");n(o,["id","style","aria-hidden"]),a.parentNode.dataset.col=0,a.parentNode.insertBefore(o,a),a.parentNode.removeChild(a)}else t.parentNode.removeChild(t)}),t.innerHTML}},{key:"_addTiny",value:function(e){this.options.tinymceSettings(e)}},{key:"_rebuild",value:function(){this.wrapBlock.parentElement&&(this.wrapBlock.parentElement.removeChild(this.wrapBlock),a.create(this.selector,this.options))}}])&&s(l.prototype,u),v&&s(l,v),e}();function c(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function r(e,t){for(var n=0;n<e.length;n++)t(e[n],e)}function d(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,n)}"undefined"==typeof window?e.pageBuilder=a:window.pageBuilder=a,Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,function(e,t,n){e.exports=n(4)},function(e,t,n){"use strict";n.r(t);n(0);pageBuilder.create(document.querySelector(".textarea"))}]);